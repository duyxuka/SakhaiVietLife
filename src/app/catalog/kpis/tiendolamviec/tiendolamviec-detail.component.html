<!-- Form Tiến độ làm việc -->
<form [formGroup]="form" (ngSubmit)="saveChange()" skipValidation>
  <p-panel #pnl header="Chi tiết tiến độ làm việc">
    <ng-template pTemplate="body">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
        <!-- KPI Nhân viên -->
        <div>
          <label for="kpiNhanVienId" class="block font-bold mb-2">KPI Nhân viên <span class="text-red-500">*</span></label>
          <p-select
            [options]="kpiNhanVienList"
            formControlName="kpiNhanVienId"
            placeholder="Chọn KPI nhân viên"
            [showClear]="true"
            style="width: 100%"
          ></p-select>
          <app-validation-message [entityForm]="form" fieldName="kpiNhanVienId" [validationMessages]="validationMessages"></app-validation-message>
        </div>

        <!-- Ngày cập nhật -->
        <div>
          <label for="ngayCapNhat" class="block font-bold mb-2">Ngày cập nhật <span class="text-red-500">*</span></label>
          <p-datepicker formControlName="ngayCapNhat" dateFormat="dd/mm/yy" showIcon="true" placeholder="Chọn ngày cập nhật" style="width:100%"></p-datepicker>
          <app-validation-message [entityForm]="form" fieldName="ngayCapNhat" [validationMessages]="validationMessages"></app-validation-message>
        </div>

        <!-- Phần trăm tiến độ -->
        <div>
          <label for="phanTramTienDo" class="block font-bold mb-2">Phần trăm tiến độ (%)</label>
          <p-inputNumber formControlName="phanTramTienDo" mode="decimal" [min]="0" [max]="100" placeholder="Nhập tiến độ (%)" style="width:100%"></p-inputNumber>
        </div>

        <!-- Ghi chú -->
        <div class="md:col-span-2">
          <label for="ghiChu" class="block font-bold mb-2">Ghi chú</label>
          <textarea id="ghiChu" pTextarea formControlName="ghiChu" rows="4" placeholder="Nhập ghi chú" style="width:100%"></textarea>
        </div>
      </div>
    </ng-template>

    <!-- Footer -->
    <ng-template pTemplate="footer">
      <p-toolbar>
        <ng-template pTemplate="end">
          <p-button
            label="Hủy"
            icon="pi pi-times"
            severity="secondary"
            [outlined]="true"
            [rounded]="true"
            (onClick)="cancel()"
            class="mr-2"
          />
          <p-button type="submit" label="Lưu lại" icon="pi pi-check" [disabled]="!form.valid || btnDisabled" [loading]="btnDisabled" />
        </ng-template>
      </p-toolbar>
    </ng-template>

    <p-blockUI [blocked]="blockedPanel" [target]="pnl">
      <p-progress-spinner style="top:37%;"></p-progress-spinner>
    </p-blockUI>
  </p-panel>
</form>