<!-- Form Mục tiêu KPI -->
<form [formGroup]="form" (ngSubmit)="saveChange()" skipValidation>
  <p-panel #pnl header="Chi tiết mục tiêu KPI">
    <ng-template pTemplate="body">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
        <!-- KPI Nhân viên -->
        <div>
          <label for="kpiNhanVienId" class="block font-bold mb-2">KPI Nhân viên <span class="text-red-500">*</span></label>
          <p-select
            [options]="kpiNhanVienList"
            formControlName="kpiNhanVienId"
            placeholder="Chọn KPI nhân viên"
            [showClear]="true"
            style="width: 100%"
          ></p-select>
          <app-validation-message [entityForm]="form" fieldName="kpiNhanVienId" [validationMessages]="validationMessages"></app-validation-message>
        </div>

        <!-- Kế hoạch công việc -->
        <div>
          <label for="keHoachCongViecId" class="block font-bold mb-2">Kế hoạch công việc</label>
          <p-select
            [options]="keHoachCongViecList"
            formControlName="keHoachCongViecId"
            placeholder="Chọn kế hoạch công việc"
            [showClear]="true"
            style="width: 100%"
          ></p-select>
        </div>

        <!-- Tên mục tiêu -->
        <div class="md:col-span-2">
          <label for="tenMucTieu" class="block font-bold mb-2">Tên mục tiêu <span class="text-red-500">*</span></label>
          <input id="tenMucTieu" pInputText formControlName="tenMucTieu" placeholder="Nhập tên mục tiêu" style="width:100%" />
          <app-validation-message [entityForm]="form" fieldName="tenMucTieu" [validationMessages]="validationMessages"></app-validation-message>
        </div>

        <!-- Giá trị mục tiêu -->
        <div>
          <label for="giaTriMucTieu" class="block font-bold mb-2">Giá trị mục tiêu</label>
          <p-inputNumber formControlName="giaTriMucTieu" mode="decimal" [min]="0" placeholder="Nhập giá trị mục tiêu" style="width:100%"></p-inputNumber>
        </div>

        <!-- Giá trị thực hiện -->
        <div>
          <label for="giaTriThucHien" class="block font-bold mb-2">Giá trị thực hiện</label>
          <p-inputNumber formControlName="giaTriThucHien" mode="decimal" [min]="0" placeholder="Nhập giá trị thực hiện" style="width:100%"></p-inputNumber>
        </div>

        <!-- Đơn vị -->
        <div>
          <label for="donVi" class="block font-bold mb-2">Đơn vị</label>
          <input id="donVi" pInputText formControlName="donVi" placeholder="Nhập đơn vị đo lường" style="width:100%" />
        </div>

        <!-- Trọng số -->
        <div>
          <label for="trongSo" class="block font-bold mb-2">Trọng số (%)</label>
          <p-inputNumber formControlName="trongSo" mode="decimal" [min]="0" [max]="100" placeholder="Nhập trọng số (0 - 100)" style="width:100%"></p-inputNumber>
        </div>
      </div>
    </ng-template>

    <!-- Footer -->
    <ng-template pTemplate="footer">
      <p-toolbar>
        <ng-template pTemplate="end">
          <p-button
            label="Hủy"
            icon="pi pi-times"
            severity="secondary"
            [outlined]="true"
            [rounded]="true"
            (onClick)="cancel()"
            class="mr-2"
          />
          <p-button type="submit" label="Lưu lại" icon="pi pi-check" [disabled]="!form.valid || btnDisabled" [loading]="btnDisabled" />
        </ng-template>
      </p-toolbar>
    </ng-template>

    <p-blockUI [blocked]="blockedPanel" [target]="pnl">
      <p-progress-spinner style="top:37%;"></p-progress-spinner>
    </p-blockUI>
  </p-panel>
</form>