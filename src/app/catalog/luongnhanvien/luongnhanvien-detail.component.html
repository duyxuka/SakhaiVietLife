<form [formGroup]="form" (ngSubmit)="saveChange()" skipValidation>
  <p-panel #pnl header="Chi tiết lương nhân viên">
    <!-- Form Body -->
    <ng-template pTemplate="body">
      <div class="flex flex-col gap-6 mt-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

          <!-- Nhân viên -->
          <div>
            <label for="nhanVienId" class="block font-bold mb-2">
              Nhân viên <span class="text-red-500">*</span>
            </label>
            <p-select
              id="nhanVienId"
              [options]="userslist"
              formControlName="nhanVienId"
              placeholder="Chọn nhân viên"
              optionLabel="label"
              optionValue="value"
              [showClear]="true"
              fluid
            ></p-select>
            <app-validation-message
              [entityForm]="form"
              fieldName="nhanVienId"
              [validationMessages]="validationMessages"
            />
          </div>

          <!-- Tháng -->
          <div>
            <label for="thang" class="block font-bold mb-2">
              Tháng <span class="text-red-500">*</span>
            </label>
            <p-select
              id="thang"
              [options]="thangOptions"
              formControlName="thang"
              placeholder="Chọn tháng"
              fluid
            ></p-select>
            <app-validation-message
              [entityForm]="form"
              fieldName="thang"
              [validationMessages]="validationMessages"
            />
          </div>

          <!-- Năm -->
          <div>
            <label for="nam" class="block font-bold mb-2">
              Năm <span class="text-red-500">*</span>
            </label>
            <input
              id="nam"
              type="number"
              pInputText
              formControlName="nam"
              placeholder="Nhập năm"
              fluid
            />
            <app-validation-message
              [entityForm]="form"
              fieldName="nam"
              [validationMessages]="validationMessages"
            />
          </div>

          <!-- Lương theo ngày công -->
          <div>
            <label for="luongTheoNgayCong" class="block font-bold mb-2">
              Lương theo ngày công
            </label>
            <input
              id="luongTheoNgayCong"
              type="number"
              pInputText
              formControlName="luongTheoNgayCong"
              placeholder="0"
              fluid
            />
          </div>

          <!-- Phụ cấp -->
          <div>
            <label for="phuCap" class="block font-bold mb-2">
              Phụ cấp
            </label>
            <input
              id="phuCap"
              type="number"
              pInputText
              formControlName="phuCap"
              placeholder="0"
              fluid
            />
          </div>

          <!-- Thưởng KPI -->
          <div>
            <label for="thuongKpi" class="block font-bold mb-2">
              Thưởng KPI
            </label>
            <input
              id="thuongKpi"
              type="number"
              pInputText
              formControlName="thuongKpi"
              placeholder="0"
              fluid
            />
          </div>

          <!-- Thưởng khác -->
          <div>
            <label for="thuongKhac" class="block font-bold mb-2">
              Thưởng khác
            </label>
            <input
              id="thuongKhac"
              type="number"
              pInputText
              formControlName="thuongKhac"
              placeholder="0"
              fluid
            />
          </div>

          <!-- Khấu trừ -->
          <div>
            <label for="khauTru" class="block font-bold mb-2">
              Khấu trừ
            </label>
            <input
              id="khauTru"
              type="number"
              pInputText
              formControlName="khauTru"
              placeholder="0"
              fluid
            />
          </div>

          <!-- Cộng/Trừ chế độ -->
          <div>
            <label for="congTruCheDo" class="block font-bold mb-2">
              Cộng/Trừ chế độ
            </label>
            <input
              id="congTruCheDo"
              type="number"
              pInputText
              formControlName="congTruCheDo"
              placeholder="0"
              fluid
            />
          </div>
        </div>
      </div>
    </ng-template>

    <!-- Footer -->
    <ng-template pTemplate="footer">
      <p-toolbar>
        <ng-template pTemplate="end">
          <p-button
            label="Hủy"
            icon="pi pi-times"
            severity="secondary"
            [outlined]="true"
            [rounded]="true"
            (onClick)="cancel()"
            class="mr-2"
          />
          <p-button
            type="submit"
            label="Lưu lại"
            icon="pi pi-check"
            [disabled]="!form.valid || btnDisabled"
            [loading]="btnDisabled"
            class="mr-2"
          />
        </ng-template>
      </p-toolbar>
    </ng-template>

    <!-- Block UI -->
    <p-blockUI [blocked]="blockedPanel" [target]="pnl">
      <p-progress-spinner style="top: 37%;" />
    </p-blockUI>
  </p-panel>
</form>
